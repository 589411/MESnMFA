# Demo 演示腳本

## 開場白（1 分鐘）

> 「貴公司的委外加工流程有一個核心難題：**混料、餘料、跨廠流轉**。
> 
> 傳統 ERP 只能記錄『進了多少、出了多少』，但無法回答：
> - 這批成品裡面，有多少是上一批的餘料？
> - 某批原料出問題，影響了後面幾批產品？
> - 為什麼這批的產出率突然變高或變低？
> 
> 今天我展示的系統，就是要解決這些問題。」

---

## Part 1：流程可視化（2 分鐘）

### 展示 Mermaid 流程圖

1. 打開 [Mermaid Live Editor](https://mermaid.live/)
2. 貼上 `prompts/flowchart_prompt.md` 生成的 Mermaid 代碼
3. 展示流程圖

### 說明重點

> 「這張圖是 AI 根據貴公司的流程描述自動生成的。
> 
> 請注意幾個關鍵點：
> 1. **虛線箭頭**：代表餘料回用，這是追溯的難點
> 2. **站點 C**：分流點，物料在這裡分家
> 3. **站點 E**：合流點，這是最複雜的地方——兩條線的產出 + 上一批的餘料，全部混在一起」

---

## Part 2：數據分析與異常偵測（3 分鐘）

### 展示模擬數據

打開 `data/simulated_production.csv`，說明欄位：

| 欄位 | 說明 | 可靠度 |
|------|------|--------|
| Input_Kg | 投入重量 | ✅ 實秤 |
| Output_Kg | 產出重量 | ✅ 實秤 |
| Water_Added_Kg | 加水量 | ✅ 有紀錄 |
| Remnant_In_Kg_Est | 餘料投入 | ⚠️ 估算 |
| Remnant_Out_Kg_Est | 餘料結存 | ⚠️ 估算 |
| Waste_Kg_Est | 廢料 | ⚠️ 估算 |
| Conversion_Rate | 轉換率 | 📊 計算值 |

### 異常偵測演示

> 「傳統系統看 B003 批次的 D_CG 站：
> - 投入 620kg + 餘料 20kg = 640kg
> - 產出 520kg
> - 看起來正常對吧？
> 
> 但 AI 系統發現：**轉換率 0.813，遠高於歷史平均 0.70**
> 
> 這代表什麼？
> - 正常脫水應該損失 30% 重量
> - 這批只損失 18.7%
> - **結論：脫水不完全，產品含水率過高**
> 
> 如果這批貨出貨，客戶會收到『看起來重量正常，但實際上水分過高』的產品。」

---

## Part 3：批次譜系追蹤（2 分鐘）

### 正向追溯

> 「假設我們發現 B003 有問題，想知道它影響了後面哪些批次。」

展示結果：
```
B003 異常批次的影響：
  → B004 @ E站: 含 1.7% 餘料（來自 B003）
  → B005 @ E站: 含 1.4% 餘料（間接來自 B003）
```

> 「即使 B003 已經出貨，它的餘料還留在產線上，污染了後面 2 批產品。」

### 反向追溯

> 「反過來，如果客戶投訴 B005 有問題，我們可以反向追溯它的原料組成。」

展示結果：
```
B005 成品組成：
  A站: 新料 98.3% + 餘料 1.7%（來自 B004）
  E站: 新料 98.5% + 餘料 1.5%（來自 B004，間接含 B003）
```

---

## Part 4：餘料管理（2 分鐘）

### 穩態餘料估算

> 「餘料是估算的，但我們可以用統計方法反推『真實的餘料量』。」

展示結果：
```
各站點穩態餘料估算：
  A站: 約 17 kg
  B站: 約 22 kg
  C站: 約 27 kg
  D_CG: 約 19 kg
  D_P: 約 16 kg
  E站: 約 13 kg
```

> 「這些數字代表『正常情況下，產線上應該殘留多少料』。
> 
> 如果某次盤點發現餘料遠超過這個數字，可能代表：
> - 設備堵塞
> - 清線不徹底
> - 數據填報錯誤」

### 異常稀釋追蹤

> 「B003 的異常成分，在 B005 中還剩多少？」

展示結果：
```
B003 異常在 B005 中的殘留：
  E站: 0.02%（已稀釋到可忽略）
```

> **如果客戶問「0.02% 怎麼算的？」：**
>
> 「這是『連鎖稀釋』的計算：
>
> **B003 → B004**：
> - B003 在 E站留下 16kg 餘料
> - B004 總投入 = 1013kg + 16kg = 1029kg
> - B003 成分佔比 = 16/1029 = **1.55%**
>
> **B004 → B005**：
> - B004 在 E站留下 13kg 餘料
> - 其中 B003 成分 = 13kg × 1.55% = 0.20kg
> - B005 總投入 = 993kg + 13kg = 1006kg
> - B003 在 B005 中佔比 = 0.20/1006 = **0.02%**
>
> 簡化公式：`稀釋比例 = (16/1029) × (13/1006) = 0.02%`
>
> 經過 2 批的稀釋，異常成分從 100% 降到 0.02%，對品質影響可忽略。」

> 「這就是 AI 的價值：它能告訴你『問題已經被稀釋到安全範圍』，而不是讓你盲目召回所有後續批次。」

---

## 結語（1 分鐘）

> 「總結一下，這套系統能幫貴公司做到：
> 
> 1. **看見流程**：複雜的委外流程一目了然
> 2. **抓出異常**：用轉換率統計，在出貨前攔截問題
> 3. **追溯來源**：正向、反向都能追
> 4. **量化餘料**：把『估算』變成『可管理』
> 
> 下一步，我們可以討論：
> - 如何讓加工廠填報數據（App 或 Web）
> - 如何與現有 ERP 整合
> - 如何設定警報閾值」

---

## 備用 Q&A

### Q: 餘料是估算的，這樣準嗎？

> 「單筆數據確實不準，但我們用的是**統計方法**。
> 
> 就像天氣預報——單次預測可能不準，但長期統計是可靠的。
> 
> 系統會用歷史數據建立『基準線』，當某批偏離基準線太多，就發出警報。」

### Q: 如果加工廠不配合填數據怎麼辦？

> 「最低要求是：投入重、產出重、加水量。這三個數據通常都有。
> 
> 餘料和廢料可以先用『標準值』，系統會自動學習調整。
> 
> 如果連這些都沒有，那問題不是系統，而是管理。」

### Q: 系統如何「自動學習調整」？

> 「系統用的是**排除異常的滾動平均**。
>
> 舉例：如果某批的轉換率偏離歷史平均超過 2 倍標準差，系統會：
> 1. 發出警報
> 2. **不把這批數據納入學習**
>
> 這樣異常批次不會污染基準線，系統會越用越準。
>
> 就像你的手機學習打字習慣——它會記住你常打的字，但不會把打錯的字學進去。」
>
> **技術細節（如果客戶追問）：**
>
> 「具體來說，系統用『反推法』：
>
> 1. **物質守恆**：投入 + 餘料 + 加水 = 產出 + 廢料 + 新餘料 + 損耗
> 2. **已知數據**：投入、產出、加水（可靠）
> 3. **未知數據**：餘料、廢料、損耗（估算）
>
> 系統計算『隱藏損耗』= 投入 + 加水 - 產出。
>
> 長期下來，如果餘料是穩態的（進 ≈ 出），那麼：
> - 長期平均隱藏損耗 ≈ 廢料 + 真實損耗
> - 系統就能推算出『標準廢料率』和『穩態餘料量』
>
> 當新批次進來，比較實際 vs 預期，偏差太大就警報。」

### Q: Z-Score 是什麼？為什麼用這個指標？

> 「Z-Score 就是告訴你：這批數據有多『不正常』。
>
> 公式很簡單：`Z = (實際值 - 平均值) / 標準差`
>
> 意義：
> - Z=1：正常波動，不用擔心
> - Z=2：有點奇怪，可以留意
> - Z=3：明顯異常，應該調查
> - **Z>5**：**嚴重異常**，幾乎不可能是隨機波動
>
> B003 的 D_CG 站 Z=5.9，意思是轉換率偏離了 5.9 個標準差。
>
> 如果是隨機波動，發生這種情況的機率是**百萬分之一**。
>
> 所以系統判定：這不是隨機波動，是真的有問題。」
>
> **如果客戶追問「為什麼用 Z-Score」：**
>
> 「因為每個站點的轉換率不同：
> - 加水站約 98%
> - 脫水站約 26%
> - 成品站約 47%
>
> 不能用絕對數字比較，要用『相對於歷史平均的偏離程度』。
>
> Z-Score 讓所有站點的異常可以用同一把尺衡量。」

### Q: 這跟 ERP 有什麼不同？

> 「ERP 是『帳本』，記錄進出庫。
> 
> 這套系統是『X 光機』，看穿物料在產線上的真實流動。
> 
> 兩者互補，不是取代。」
